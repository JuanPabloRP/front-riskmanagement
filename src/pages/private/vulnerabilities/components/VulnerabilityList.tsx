# CREAMOS  Y CAMBIAMOS A LA NUEVA RAMA DE LISTAS DE VULNERABILIDADES 
git checkout -b feature/RM-5-2-listar-vulnerabilidades
import React, { useEffect, useState } from 'react';
import { Table } from 'flowbite-react';
import { fetchVulnerabilities } from '../../../../utils/fetchVulnerabilities';
import { Vulnerability } from '../../../../shared/interfaces/vulnerability.interface';
import { notifyError } from '../../../../utils/toast';

const VulnerabilityList: React.FC = () => {
  const [vulnerabilities, setVulnerabilities] = useState<Vulnerability[]>([]);
  const [loading, setLoading] = useState(true);

  useEffect(() => {
    loadVulnerabilities();
  }, []);

  const loadVulnerabilities = async () => {
    try {
      const data = await fetchVulnerabilities();
      setVulnerabilities(data);
    } catch (error) {
      notifyError('Error al cargar las vulnerabilidades');
    } finally {
      setLoading(false);
    }
  };

  if (loading) return <div>Cargando...</div>;

  return (
    <div className="overflow-x-auto">
      <Table>
        <Table.Head>
          <Table.HeadCell>Título</Table.HeadCell>
          <Table.HeadCell>Descripción</Table.HeadCell>
          <Table.HeadCell>Severidad</Table.HeadCell>
          <Table.HeadCell>Impacto</Table.HeadCell>
          <Table.HeadCell>Acciones</Table.HeadCell>
        </Table.Head>
        <Table.Body>
          {vulnerabilities.map((vulnerability) => (
            <Table.Row key={vulnerability.id}>
              <Table.Cell>{vulnerability.title}</Table.Cell>
              <Table.Cell>{vulnerability.description}</Table.Cell>
              <Table.Cell>
                <span className={`px-2 py-1 rounded-full text-xs ${
                  vulnerability.severity === 'HIGH' ? 'bg-red-100 text-red-800' :
                  vulnerability.severity === 'MEDIUM' ? 'bg-yellow-100 text-yellow-800' :
                  'bg-green-100 text-green-800'
                }`}>
                  {vulnerability.severity}
                </span>
              </Table.Cell>
              <Table.Cell>{vulnerability.impact}</Table.Cell>
              <Table.Cell>
                <div className="flex space-x-2">
                  <Button size="sm">Editar</Button>
                  <Button size="sm" color="failure">Eliminar</Button>
                </div>
              </Table.Cell>
            </Table.Row>
          ))}
        </Table.Body>
      </Table>
    </div>
  );
};

export default VulnerabilityList;
